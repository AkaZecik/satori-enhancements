/* TableHeadFixer 1.0.0 by lai32290 (https://github.com/lai32290/HelloTableFixHeader) */

!function(a){a.fn.tableHeadFixer=function(b){function c(){function e(){var b=a(d.table);if(d.head){if(d.left>0){var c=b.find("thead tr");c.each(function(b,c){l(c,function(b){a(b).css("z-index",d["z-index"]+1)})})}if(d.right>0){var c=b.find("thead tr");c.each(function(b,c){m(c,function(b){a(b).css("z-index",d["z-index"]+1)})})}}if(d.foot){if(d.left>0){var c=b.find("tfoot tr");c.each(function(b,c){l(c,function(b){a(b).css("z-index",d["z-index"])})})}if(d.right>0){var c=b.find("tfoot tr");c.each(function(b,c){m(c,function(b){a(b).css("z-index",d["z-index"])})})}}}function f(){var b=a(d.parent),c=a(d.table);b.append(c),b.css({"overflow-x":"auto","overflow-y":"auto"}),b.scroll(function(){var a=b[0].scrollWidth,c=b[0].clientWidth,e=b[0].scrollHeight,f=b[0].clientHeight,g=b.scrollTop(),h=b.scrollLeft();d.head&&this.find("thead tr > *").css("top",g),d.foot&&this.find("tfoot tr > *").css("bottom",e-f-g),d.left>0&&d.leftColumns.css("left",h),d.right>0&&d.rightColumns.css("right",a-c-h)}.bind(c))}function g(){var b=a(d.table).find("thead"),e=(b.find("tr"),b.find("tr > *"));k(e),e.css({position:"relative"})}function h(){var b=a(d.table).find("tfoot"),e=(b.find("tr"),b.find("tr > *"));k(e),e.css({position:"relative"})}function i(){var b=a(d.table);d.leftColumns=a();var c=b.find("tr");c.each(function(a,b){l(b,function(a){d.leftColumns=d.leftColumns.add(a)})});var e=d.leftColumns;e.each(function(b,c){var c=a(c);k(c),c.css({position:"relative"})})}function j(){var b=a(d.table);d.right;d.rightColumns=a();var e=b.find("tr");e.each(function(a,b){m(b,function(a){d.rightColumns=d.rightColumns.add(a)})});var f=d.rightColumns;f.each(function(b,c){var c=a(c);k(c),c.css({position:"relative"})})}function k(b){b.each(function(b,c){var c=a(c),d=a(c).parent(),e=c.css("background-color");e="transparent"==e||"rgba(0, 0, 0, 0)"==e?null:e;var f=d.css("background-color");f="transparent"==f||"rgba(0, 0, 0, 0)"==f?null:f;var g=f?f:"white";g=e?e:g,c.css("background-color",g)})}function l(b,c){for(var e=d.left,f=1,g=1;g<=e;g+=f){var h=f>1?g-1:g,i=a(b).find("> *:nth-child("+h+")"),j=i.prop("colspan");i.cellPos().left<e&&c(i),f=j}}function m(b,c){for(var e=d.right,f=1,g=1;g<=e;g+=f){var h=f>1?g-1:g,i=a(b).find("> *:nth-last-child("+h+")"),j=i.prop("colspan");c(i),f=j}}var c={head:!0,foot:!1,left:0,right:0,"z-index":0},d=a.extend({},c,b);d.table=this,d.parent=a(d.table).parent(),f(),1==d.head&&g(),1==d.foot&&h(),d.left>0&&i(),d.right>0&&j(),e(),a(d.parent).trigger("scroll"),a(window).resize(function(){a(d.parent).trigger("scroll")})}return this.each(function(){c.call(this)})}}(jQuery),function(a){function b(b){var c=[];b.children("tr").each(function(b,d){a(d).children("td, th").each(function(d,e){var i,j,f=a(e),g=0|f.attr("colspan"),h=0|f.attr("rowspan");for(g=g?g:1,h=h?h:1;c[b]&&c[b][d];++d);for(i=d;i<d+g;++i)for(j=b;j<b+h;++j)c[j]||(c[j]=[]),c[j][i]=!0;var k={top:b,left:d};f.data("cellPos",k)})})}a.fn.cellPos=function(a){var c=this.first(),d=c.data("cellPos");if(!d||a){var e=c.closest("table, thead, tbody, tfoot");b(e)}return d=c.data("cellPos")}}(jQuery);
